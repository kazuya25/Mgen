#define _INC_BIB
#include <iostream>
#include <cstdio>
#include "image.h"
#include <dirent.h>
#include <string>
#include <vector>
#include <algorithm>
#include <sstream>
#include <ctime>


class Bibliotheque
{
public:
	// Crée une bibliothèque vide
	Bibliotheque(void);

	// Crée une bibliothèque avec les couleurs primaires
	Bibliotheque::Bibliotheque(int tailleX,int tailleY);

	// Enregistre les noms des images dans un dossier NON récursivement !
	// NE CHARGE PAS les images
	Bibliotheque(string path);

	// Enregistre les noms des images dans un dossier NON récursivement !
	Bibliotheque(string path, bool toLoad);

	~Bibliotheque(void);

	// Manipulation d'images
	void saveImagesInList();
	void saveImagesInList(vector<string> folderList);
	void saveImagesInList(string folderPath);
	
	void loadImages(vector<string>);
	void loadImages();
	
	// Redimensionne toutes les images de la bibliotheques
	// La variable useLoadedImages va déterminer quel ensemble d'images utiliser : préchargées (this->loadedImages) ou non (this->images)
	// Soit les images sont préchargées et on utilise le vecteur d'images "this->loadedImages"
	// Soit les images ne sont pas chargées, on les charges à la volée et on utilise le vecteur de "string this->images"
	void redimImageBib(int tailleX,int tailleY, bool useLoadedImages);

	// contient une liste d'images NON CHARGEES
	vector<string> images;
	// contient une liste d'images CHARGEES
	vector<Image> loadedImages;
	// contient une liste de dossiers dont les images ne sont pas forcément chargees
	vector<string> folders;
	// contient une liste d'images CHARGEES redimensionnees
	vector<Image> redimImages;
	//Un booleen pour le redimensionnement des images
	bool redim;

};

// fonction de manipulation d'images dans un dossier, pas besoin de dependance avec la classe bibliotheque
void rotateAllImagesInFolder(string inputfolder, string outputfolder);
// fonction de recuperation des fichiers dans un dossier
vector<string> getFilesInFolders(string folderPath);
